@using Blog.Web.Models

@model BlogViewModel

<div class="row">
    @Html.HiddenFor(model => model.PaginaAtual)
    <div class="col-md-9">
        <!-- Blog All Posts -->
        <div id="divPosts">
            @{ Html.RenderPartial("Posts", Model.Posts); }
        </div>
        <!-- Pager v3 -->
        <ul class="pager pager-v3 pager-sm no-margin-bottom">
            <li class="previous"><a id="linkAntigos">← Antigos</a></li>
            <li class="page-amount"><label id="divPaginaAtual">1</label> de @Model.QuantidadeDePaginas</li>
            <li class="next"><a id="linkNovos">Novos →</a></li>
        </ul>
    </div>
    <!-- End Pager v3 -->
    <!-- Blog Sidebar -->
    @{ Html.RenderAction("BarraLateral"); }
    <!-- End Blog Sidebar -->
</div>

<script>
    $("#linkAntigos").click(function () {
        var paginaAtual = $("#PaginaAtual").val();
        var paginaDeDestino = parseInt(paginaAtual) + 1;
        paginaDeDestino = paginaDeDestino <= @Model.QuantidadeDePaginas ? paginaDeDestino :  @Model.QuantidadeDePaginas;
        $.ajax({
            type: "GET",
            url: "@Url.Action("Posts", "Blog")",
            contentType: 'application/html; charset=utf-8',
            data: { paginaAtual: paginaDeDestino },
            success: function (html) {
                $("#PaginaAtual").val(paginaDeDestino);
                $("#divPaginaAtual").val(paginaDeDestino);
                $("#divPosts").html(html);
            }
        });
    });

    $("#linkNovos").click(function () {
        var paginaAtual = $("#PaginaAtual").val();
        var paginaDeDestino = parseInt(paginaAtual) - 1;
        paginaDeDestino = paginaDeDestino > 0 ? paginaDeDestino : paginaAtual
        paginaAtual = paginaDeDestino;
        $.ajax({
            type: "GET",
            url: "@Url.Action("Posts", "Blog")",
            contentType: 'application/html; charset=utf-8',
            data: { paginaAtual: paginaAtual },
            success: function (html) {
                $("#PaginaAtual").val(paginaDeDestino);
                $("#divPaginaAtual").val(paginaDeDestino);
                $("#divPosts").html(html);
            }
        });
    });
</script>